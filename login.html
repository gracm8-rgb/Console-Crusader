<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Login - Console Crusader</title>
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body{background:#0b0b12;color:#fff;display:flex;align-items:center;justify-content:center;height:100vh;font-family:Poppins,system-ui;}
      .card{width:100%;max-width:420px;padding:22px;border-radius:12px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);}
      a{text-decoration:underline;color:#9aa2ff}
    </style>
  </head>
  <body>
    <div class="card">
      <h4>Console Crusader — Login</h4>
      <p style="opacity:.8;">Sign in or create an account (client-side demo only).</p>

      <div id="msg" style="display:none;margin-bottom:10px;"></div>

      <form id="auth-form">
        <div class="mb-2">
          <input id="username" class="form-control" placeholder="Username" required>
        </div>
        <div class="mb-2">
          <input id="password" type="password" class="form-control" placeholder="Password" required>
        </div>
        <div class="d-flex gap-2">
          <button id="btn-login" class="btn btn-primary">Login</button>
          <button id="btn-register" type="button" class="btn btn-outline-light">Register</button>
          <a href="index.html" class="btn btn-link" style="margin-left:auto;color:#9aa2ff">Back</a>
        </div>
      </form>

    </div>

    <script>
      // Simple client-side user store (localStorage). Not secure — demo only.
      function users(){ try { return JSON.parse(localStorage.getItem('cc_users')||'{}') } catch(e){ return {} } }
      function saveUsers(u){ localStorage.setItem('cc_users', JSON.stringify(u)) }
      function setCurrentUser(username){ localStorage.setItem('cc_user', JSON.stringify({username:username})); }
      function showMsg(t, cls='alert-success'){ const el=document.getElementById('msg'); el.style.display='block'; el.className = 'alert '+cls; el.textContent=t; }

      document.getElementById('btn-register').addEventListener('click', function(){
        const u = document.getElementById('username').value.trim();
        const p = document.getElementById('password').value;
        if (!u || !p) return showMsg('Enter username and password','alert-danger');
        const all = users();
        if (all[u]) return showMsg('Username exists, choose another.','alert-danger');
        // store password with basic encoding (not secure) to avoid plain visible text
        all[u] = btoa(p);
        saveUsers(all);
        setCurrentUser(u);
        showMsg('Registered and logged in. Redirecting...', 'alert-success');
        setTimeout(()=> location.href='index.html', 800);
      });

      document.getElementById('btn-login').addEventListener('click', function(ev){
        ev.preventDefault();
        const u = document.getElementById('username').value.trim();
        const p = document.getElementById('password').value;
        if (!u || !p) return showMsg('Enter username and password','alert-danger');
        const all = users();
        if (!all[u]) return showMsg('User not found. Register first.','alert-danger');
        if (atob(all[u]) !== p) return showMsg('Incorrect password.','alert-danger');
        setCurrentUser(u);
        showMsg('Logged in. Redirecting...', 'alert-success');
        setTimeout(()=> location.href='index.html', 600);
      });
    </script>
  </body>
</html>